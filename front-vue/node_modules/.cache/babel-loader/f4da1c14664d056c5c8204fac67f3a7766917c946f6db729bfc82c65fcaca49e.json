{"ast":null,"code":"import serviceAsios from '../../axios/serviceAxios';\nconst lowerCaseName = 'tstudent';\nconst columns = [\n// { title: 'id', width: 100, dataIndex: 'name', key: 'id', fixed: 'left' },\n{\n  title: 'classId',\n  width: 100,\n  dataIndex: 'classId',\n  key: 'classId'\n}, {\n  title: '操作',\n  key: 'operation',\n  fixed: 'right',\n  width: 100,\n  scopedSlots: {\n    customRender: 'action'\n  }\n}];\nconst fieldList = [{\n  name: 'classId',\n  label: 'classId'\n}];\nexport default {\n  name: \"tstudent\",\n  data() {\n    return {\n      test: 1,\n      viewModel: 'list',\n      loading: false,\n      data: [],\n      columns,\n      fieldList,\n      selectField: '',\n      selectFieldValue: '',\n      pagination: {\n        \"current\": 1,\n        \"default-current\": 1,\n        \"pageSize\": 10,\n        \"show-less-items\": true,\n        \"show-quick-jumper\": true,\n        \"total\": 50\n      },\n      selectedRowKeys: [],\n      labelCol: {\n        span: 4\n      },\n      wrapperCol: {\n        span: 10\n      },\n      insertForm: {\n        classId: ''\n      },\n      updateForm: {\n        classId: ''\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: 'Please input Activity name',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 5,\n          message: 'Length should be 3 to 5',\n          trigger: 'blur'\n        }]\n      },\n      tClassList: []\n    };\n  },\n  computed: {\n    rowSelection() {\n      return {\n        selectedRowKeys: this.selectedRowKeys,\n        onChange: this.onSelectChange\n      };\n    }\n  },\n  mounted() {\n    this.selectPage();\n  },\n  methods: {\n    selectPage() {\n      this.loading = true;\n      let that = this;\n      let params = {\n        \"pageNum\": this.pagination.current,\n        \"pageSize\": this.pagination.pageSize\n      };\n      if (this.selectField != '') {\n        params[this.selectField] = this.selectFieldValue;\n      }\n      serviceAsios({\n        url: '/api/' + lowerCaseName + '/selectPage',\n        method: 'get',\n        params: params\n      }).then(res => {\n        setTimeout(() => {\n          let responseResult = res.data;\n          console.log(\"selectPage - responseResult\", responseResult);\n          if (responseResult.code != 200) {\n            console.log(\"selectPage - responseResult\", responseResult);\n            return;\n          }\n          let list = responseResult.data.list;\n          for (let index = 0; index < list.length; index++) {\n            let ele = list[index];\n            ele.key = ele.id;\n          }\n          that.data = list;\n          that.pagination.total = responseResult.data.total;\n          this.loading = false;\n          // hide()\n        }, 400);\n      }).catch(error => {\n        console.log(\"selectPage - error\", error);\n      });\n    },\n    deleteByIds() {\n      let that = this;\n      if (that.selectedRowKeys.length == 0) {\n        this.$message.warning('请至少选择一条');\n        return;\n      }\n      function deleteData() {\n        serviceAsios({\n          url: '/api/' + lowerCaseName + '/deleteByIds',\n          method: 'post',\n          data: that.selectedRowKeys\n        }).then(res => {\n          let responseResult = res.data;\n          console.log(\"deleteByIds - responseResult\", responseResult);\n          if (responseResult.code != 200) {\n            console.log(\"deleteByIds - responseResult\", responseResult);\n            return;\n          }\n          that.$message.success(\"删除成功\");\n          that.selectPage();\n        }).catch(error => {\n          console.log(\"deleteByIds - error\", error);\n        });\n      }\n      this.confirm(\"确认删除吗？\", \"删除之无法恢复！\").then((resolve, reject) => {\n        console.log(\"deleteByIds - resolve\", resolve);\n        console.log(\"deleteByIds - reject\", reject);\n        if (resolve) {\n          deleteData();\n        }\n      }).catch(err => {\n        console.log(\"deleteByIds - err\", err);\n      });\n    },\n    pageChange(page) {\n      console.log(\"page\", page);\n      this.pagination = page;\n      console.log(\"pagination\", this.pagination);\n      this.selectPage();\n    },\n    onSelectChange(selectedRowKeys) {\n      console.log('selectedRowKeys changed: ', selectedRowKeys);\n      this.selectedRowKeys = selectedRowKeys;\n    },\n    insertFormSubmit(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.insert();\n          console.log('submit!', this.insertForm);\n          this.insertForm = {};\n        } else {\n          this.$message.error('请按照要求填写');\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    updateFormSubmit(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          console.log('submit!', this.insertForm);\n          this.updateById();\n        } else {\n          alert(\"请按照规范格式填写\");\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    clickEdit(id) {\n      let that = this;\n      console.log(\"clickEdit - id\", id);\n      this.changeViewModel('update');\n      this.selectForeignKey('tClass', 'tClassList');\n      this.selectById(id).then(obj => {\n        console.log(\"clickEdit - obj\", obj);\n        that.updateForm = obj;\n      });\n    },\n    async selectById(id) {\n      let that = this;\n      let result = {};\n      await serviceAsios({\n        url: '/api/' + lowerCaseName + '/selectById',\n        method: 'get',\n        params: {\n          id: id\n        }\n      }).then(res => {\n        let responseResult = res.data;\n        console.log(\"selectById - responseResult\", responseResult);\n        if (responseResult.code != 200) {\n          console.log(\"selectById - responseResult\", responseResult);\n          return;\n        }\n        result = responseResult.data;\n      }).catch(error => {\n        console.log(\"selectById - error\", error);\n      });\n      return result;\n    },\n    insert() {\n      let that = this;\n      console.log(\"insert - that.insertForm\", that.insertForm);\n      serviceAsios({\n        url: '/api/' + lowerCaseName + '/insert',\n        method: 'post',\n        data: that.insertForm\n      }).then(res => {\n        let responseResult = res.data;\n        console.log(\"insert - responseResult\", responseResult);\n        if (responseResult.code != 200) {\n          console.log(\"insert - responseResult\", responseResult);\n          return;\n        }\n        this.$message.success('添加成功');\n        this.changeViewModel('list');\n        that.selectPage();\n      }).catch(error => {\n        console.log(\"insert - error\", error);\n      });\n    },\n    updateById() {\n      let that = this;\n      serviceAsios({\n        url: '/api/' + lowerCaseName + '/updateById',\n        method: 'post',\n        data: that.updateForm\n      }).then(res => {\n        let responseResult = res.data;\n        console.log(\"updateById - responseResult\", responseResult);\n        if (responseResult.code != 200) {\n          console.log(\"updateById - responseResult\", responseResult);\n          return;\n        }\n        this.$message.success('修改成功');\n        this.changeViewModel('list');\n        that.selectPage();\n      }).catch(error => {\n        console.log(\"updateById - error\", error);\n      });\n    },\n    clickNew() {\n      this.changeViewModel(\"insert\");\n      this.selectForeignKey('tClass', 'tClassList');\n    },\n    changeViewModel(viewModel) {\n      this.viewModel = viewModel;\n      console.log(\"changeViewModel - viewModel\", this.viewModel);\n    },\n    confirm(title, content) {\n      let that = this;\n      return new Promise((resolve, reject) => {\n        that.$confirm({\n          title: title,\n          content: content,\n          onOk() {\n            resolve(true);\n          },\n          onCancel() {\n            reject(false);\n          }\n        });\n      });\n    },\n    selectForeignKey(tableName, field) {\n      let that = this;\n      serviceAsios({\n        url: '/api/' + tableName + '/select',\n        method: 'get'\n        // params: params\n      }).then(res => {\n        let responseResult = res.data;\n        console.log(\"selectForeignKey - responseResult\", responseResult);\n        if (responseResult.code != 200) {\n          console.log(\"selectForeignKey - responseResult\", responseResult);\n          return;\n        }\n        that[field] = responseResult.data;\n      }).catch(error => {\n        console.log(\"selectForeignKey - error\", error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["serviceAsios","lowerCaseName","columns","title","width","dataIndex","key","fixed","scopedSlots","customRender","fieldList","name","label","data","test","viewModel","loading","selectField","selectFieldValue","pagination","selectedRowKeys","labelCol","span","wrapperCol","insertForm","classId","updateForm","rules","required","message","trigger","min","max","tClassList","computed","rowSelection","onChange","onSelectChange","mounted","selectPage","methods","that","params","current","pageSize","url","method","then","res","setTimeout","responseResult","console","log","code","list","index","length","ele","id","total","catch","error","deleteByIds","$message","warning","deleteData","success","confirm","resolve","reject","err","pageChange","page","insertFormSubmit","formName","$refs","validate","valid","insert","updateFormSubmit","updateById","alert","clickEdit","changeViewModel","selectForeignKey","selectById","obj","result","clickNew","content","Promise","$confirm","onOk","onCancel","tableName","field"],"sources":["src/components/example/tStudent.vue"],"sourcesContent":["<template>\r\n  <div class=\"content-template\">\r\n    <transition name=\"slide-fade\" mode=\"out-in\">\r\n      <div v-if=\"viewModel=='list'\" key=\"list\" class=\"content-container main-container\">\r\n        <a-row type=\"flex\">\r\n          <a-col :span=\"8\" :order=\"1\">\r\n            <div class=\"left-button\">\r\n              <a-space>\r\n                <a-button type=\"primary\" class=\"insert-button\" @click=\"clickNew()\"> 增加 </a-button>\r\n                <a-button type=\"danger\" class=\"delete-button\" @click=\"deleteByIds\"> 删除 </a-button>\r\n              </a-space>\r\n            </div>\r\n          </a-col>\r\n          <a-col :span=\"6\" :order=\"2\"> </a-col>\r\n          <a-col :span=\"10\" :order=\"3\">\r\n            <a-space>\r\n                        <span>\r\n                            属性：\r\n                        </span>\r\n              <a-select v-model=\"selectField\" default-value=\"\" style=\"width: 120px\">\r\n                <a-select-option :key=\"field.name\" v-for=\"field in fieldList\" :value=\"field.name\"> {{field.label}} </a-select-option>\r\n              </a-select>\r\n              <span>：</span>\r\n              <a-input v-model=\"selectFieldValue\">\r\n              </a-input>\r\n              <a-button type=\"primary\" class=\"select-button\" @click=\"selectPage()\"> 查询 </a-button>\r\n            </a-space>\r\n          </a-col>\r\n        </a-row>\r\n        <div class=\"entity-list-container container\">\r\n          <div class=\"entity-list\">\r\n            <a-table :loading=\"loading\" :row-selection=\"rowSelection\" :columns=\"columns\" :data-source=\"data\" :scroll=\"{ x: 1500, y: 400 }\" :pagination=\"pagination\" @change=\"pageChange\">\r\n              <a slot=\"action\" @click=\"clickEdit(record.id)\" slot-scope=\"text, record\">编辑</a>\r\n            </a-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"viewModel=='insert'\" key=\"insert\" class=\"entity-insert-container main-container\">\r\n        <div class=\"top-back\">\r\n                <span @click=\"changeViewModel('list')\">\r\n                    <a-icon type=\"left\" /></span>\r\n        </div>\r\n        <div class=\"entity-insert\">\r\n          <a-form-model ref='ruleInsertForm' :rules=\"rules\" :model=\"insertForm\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n            <!-- <a-form-model-item ref=\"name\" label=\"name\" prop=\"name\">\r\n                <a-input v-model=\"insertForm.name\" @blur=\"() => {$refs.name.onFieldBlur();}\" />\r\n            </a-form-model-item> -->\r\n                    <a-form-model-item label=\"classId\">\n                        <a-select v-model=\"insertForm.classId\" placeholder=\"\">\n                            <a-select-option v-for=\"item in t_classList\" :key=\"item.id\" :value=\"item.id\">\n                               {{item.className}}\n                            </a-select-option>\n                        </a-select>\n                    </a-form-model-item>                <a-form-model-item ref=\"classId\" label=\"classId\" prop=\"classId\">\n                        <a-input v-model=\"insertForm.classId\" @blur=\"() => {$refs.classId.onFieldBlur();}\" />\n                    </a-form-model-item>\r\n\r\n            <!-- <a-form-model-item label=\"Activity zone\">\r\n                    <a-select v-model=\"insertForm.region\" placeholder=\"please select your zone\">\r\n                        <a-select-option value=\"shanghai\">\r\n                            Zone one\r\n                        </a-select-option>\r\n                        <a-select-option value=\"beijing\">\r\n                            Zone two\r\n                        </a-select-option>\r\n                    </a-select>\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Activity time\">\r\n                    <a-date-picker v-model=\"insertForm.date1\" show-time type=\"date\" placeholder=\"Pick a date\" style=\"width: 100%;\" />\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Instant delivery\">\r\n                    <a-switch v-model=\"insertForm.delivery\" />\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Activity type\">\r\n                    <a-checkbox-group v-model=\"insertForm.type\">\r\n                        <a-checkbox value=\"1\" name=\"type\">\r\n                            Online\r\n                        </a-checkbox>\r\n                        <a-checkbox value=\"2\" name=\"type\">\r\n                            Promotion\r\n                        </a-checkbox>\r\n                        <a-checkbox value=\"3\" name=\"type\">\r\n                            Offline\r\n                        </a-checkbox>\r\n                    </a-checkbox-group>\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Resources\">\r\n                    <a-radio-group v-model=\"insertForm.resource\">\r\n                        <a-radio value=\"1\">\r\n                            Sponsor\r\n                        </a-radio>\r\n                        <a-radio value=\"2\">\r\n                            Venue\r\n                        </a-radio>\r\n                    </a-radio-group>\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Activity form\">\r\n                    <a-input v-model=\"insertForm.desc\" type=\"textarea\" />\r\n                </a-form-model-item> -->\r\n            <a-form-model-item :wrapper-col=\"{ span: 14, offset: 4 }\">\r\n              <a-space size='large'>\r\n                <a-button type=\"primary\" @click=\"insertFormSubmit('ruleInsertForm')\">\r\n                  提交\r\n                </a-button>\r\n                <a-button type=\"dashed\" @click=\"changeViewModel('list')\">\r\n                  取消\r\n                </a-button>\r\n              </a-space>\r\n            </a-form-model-item>\r\n          </a-form-model>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"viewModel=='update'\" key=\"update\" class=\"entity-update-container main-container\">\r\n        <div class=\"top-back\">\r\n                <span @click=\"changeViewModel('list')\">\r\n                    <a-icon type=\"left\" /></span>\r\n        </div>\r\n        <div class=\"entity-update\">\r\n          <a-form-model ref='ruleUpdateForm' :rules=\"rules\" :model=\"updateForm\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n            <!-- <a-form-model-item ref=\"name\" label=\"name\" prop=\"name\">\r\n                <a-input v-model=\"updateForm.name\" @blur=\"() => {$refs.name.onFieldBlur();}\" />\r\n            </a-form-model-item> -->\r\n                    <a-form-model-item label=\"classId\">\n                        <a-select v-model=\"updateForm.classId\" placeholder=\"\">\n                            <a-select-option v-for=\"item in t_classList\" :key=\"item.id\" :value=\"item.id\">\n                               {{item.className}}\n                            </a-select-option>\n                        </a-select>\n                    </a-form-model-item>                <a-form-model-item ref=\"classId\" label=\"classId\" prop=\"classId\">\n                        <a-input v-model=\"updateForm.classId\" @blur=\"() => {$refs.classId.onFieldBlur();}\" />\n                    </a-form-model-item>\r\n\r\n            <!-- <a-form-model-item label=\"Activity zone\">\r\n                    <a-select v-model=\"updateForm.region\" placeholder=\"please select your zone\">\r\n                        <a-select-option value=\"shanghai\">\r\n                            Zone one\r\n                        </a-select-option>\r\n                        <a-select-option value=\"beijing\">\r\n                            Zone two\r\n                        </a-select-option>\r\n                    </a-select>\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Activity time\">\r\n                    <a-date-picker v-model=\"updateForm.date1\" show-time type=\"date\" placeholder=\"Pick a date\" style=\"width: 100%;\" />\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Instant delivery\">\r\n                    <a-switch v-model=\"updateForm.delivery\" />\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Activity type\">\r\n                    <a-checkbox-group v-model=\"updateForm.type\">\r\n                        <a-checkbox value=\"1\" name=\"type\">\r\n                            Online\r\n                        </a-checkbox>\r\n                        <a-checkbox value=\"2\" name=\"type\">\r\n                            Promotion\r\n                        </a-checkbox>\r\n                        <a-checkbox value=\"3\" name=\"type\">\r\n                            Offline\r\n                        </a-checkbox>\r\n                    </a-checkbox-group>\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Resources\">\r\n                    <a-radio-group v-model=\"updateForm.resource\">\r\n                        <a-radio value=\"1\">\r\n                            Sponsor\r\n                        </a-radio>\r\n                        <a-radio value=\"2\">\r\n                            Venue\r\n                        </a-radio>\r\n                    </a-radio-group>\r\n                </a-form-model-item>\r\n                <a-form-model-item label=\"Activity form\">\r\n                    <a-input v-model=\"updateForm.desc\" type=\"textarea\" />\r\n                </a-form-model-item> -->\r\n            <a-form-model-item :wrapper-col=\"{ span: 14, offset: 4 }\">\r\n              <a-space size='large'>\r\n                <a-button type=\"primary\" @click=\"updateFormSubmit('ruleUpdateForm')\">\r\n                  提交\r\n                </a-button>\r\n                <a-button type=\"dashed\" @click=\"changeViewModel('list')\">\r\n                  取消\r\n                </a-button>\r\n              </a-space>\r\n            </a-form-model-item>\r\n          </a-form-model>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport serviceAsios from '../../axios/serviceAxios'\r\n\r\nconst lowerCaseName = 'tstudent'\r\nconst columns = [\r\n  // { title: 'id', width: 100, dataIndex: 'name', key: 'id', fixed: 'left' },\r\n\t{ title: 'classId', width: 100, dataIndex: 'classId', key: 'classId'},\r\n\r\n  {\r\n    title: '操作',\r\n    key: 'operation',\r\n    fixed: 'right',\r\n    width: 100,\r\n    scopedSlots: {\r\n      customRender: 'action'\r\n    },\r\n  },\r\n];\r\n\r\nconst fieldList = [\r\n\t{name:'classId',label:'classId'},\r\n\r\n]\r\n\r\nexport default {\r\n  name: \"tstudent\",\r\n  data() {\r\n    return {\r\n      test: 1,\r\n      viewModel: 'list',\r\n      loading: false,\r\n      data: [],\r\n      columns,\r\n      fieldList,\r\n      selectField: '',\r\n      selectFieldValue: '',\r\n      pagination: {\r\n        \"current\": 1,\r\n        \"default-current\": 1,\r\n        \"pageSize\": 10,\r\n        \"show-less-items\": true,\r\n        \"show-quick-jumper\": true,\r\n        \"total\": 50,\r\n      },\r\n      selectedRowKeys: [],\r\n      labelCol: {\r\n        span: 4\r\n      },\r\n      wrapperCol: {\r\n        span: 10\r\n      },\r\n      insertForm: {\r\n\t\t\t\tclassId:'',\r\n\r\n      },\r\n      updateForm: {\r\n\t\t\t\tclassId:'',\r\n\r\n      },\r\n      rules: {\r\n        name: [{\r\n          required: true,\r\n          message: 'Please input Activity name',\r\n          trigger: 'blur'\r\n        },\r\n          {\r\n            min: 3,\r\n            max: 5,\r\n            message: 'Length should be 3 to 5',\r\n            trigger: 'blur'\r\n          },\r\n        ],\r\n      },\r\n\t\t\t\ttClassList:[]\r\n\r\n    };\r\n  },\r\n  computed: {\r\n    rowSelection() {\r\n      return {\r\n        selectedRowKeys: this.selectedRowKeys,\r\n        onChange: this.onSelectChange\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.selectPage()\r\n  },\r\n  methods: {\r\n    selectPage() {\r\n      this.loading = true\r\n      let that = this\r\n      let params = {\r\n        \"pageNum\": this.pagination.current,\r\n        \"pageSize\": this.pagination.pageSize,\r\n      }\r\n      if (this.selectField != '') {\r\n        params[this.selectField] = this.selectFieldValue\r\n      }\r\n\r\n      serviceAsios({\r\n        url: '/api/'+lowerCaseName+'/selectPage',\r\n        method: 'get',\r\n        params: params\r\n      })\r\n          .then(res => {\r\n            setTimeout(() => {\r\n              let responseResult = res.data\r\n              console.log(\"selectPage - responseResult\", responseResult)\r\n              if (responseResult.code != 200) {\r\n                console.log(\"selectPage - responseResult\", responseResult)\r\n                return;\r\n              }\r\n              let list = responseResult.data.list\r\n              for (let index = 0; index < list.length; index++) {\r\n                let ele = list[index];\r\n                ele.key = ele.id\r\n              }\r\n              that.data = list\r\n              that.pagination.total = responseResult.data.total\r\n              this.loading = false\r\n              // hide()\r\n            }, 400)\r\n          })\r\n          .catch(error => {\r\n            console.log(\"selectPage - error\", error)\r\n          })\r\n    },\r\n    deleteByIds() {\r\n      let that = this\r\n      if (that.selectedRowKeys.length == 0) {\r\n        this.$message.warning('请至少选择一条')\r\n        return\r\n      }\r\n\r\n      function deleteData() {\r\n        serviceAsios({\r\n          url: '/api/'+lowerCaseName+'/deleteByIds',\r\n          method: 'post',\r\n          data: that.selectedRowKeys\r\n        })\r\n            .then(res => {\r\n              let responseResult = res.data\r\n              console.log(\"deleteByIds - responseResult\", responseResult)\r\n              if (responseResult.code != 200) {\r\n                console.log(\"deleteByIds - responseResult\", responseResult)\r\n                return;\r\n              }\r\n              that.$message.success(\"删除成功\")\r\n              that.selectPage()\r\n            })\r\n            .catch(error => {\r\n              console.log(\"deleteByIds - error\", error)\r\n            })\r\n      }\r\n\r\n      this.confirm(\"确认删除吗？\", \"删除之无法恢复！\")\r\n          .then((resolve, reject) => {\r\n            console.log(\"deleteByIds - resolve\", resolve)\r\n            console.log(\"deleteByIds - reject\", reject)\r\n            if (resolve) {\r\n              deleteData()\r\n            }\r\n          }).catch((err) => {\r\n        console.log(\"deleteByIds - err\", err)\r\n      })\r\n    },\r\n    pageChange(page) {\r\n      console.log(\"page\", page)\r\n      this.pagination = page\r\n      console.log(\"pagination\", this.pagination)\r\n      this.selectPage()\r\n    },\r\n    onSelectChange(selectedRowKeys) {\r\n      console.log('selectedRowKeys changed: ', selectedRowKeys);\r\n      this.selectedRowKeys = selectedRowKeys;\r\n    },\r\n    insertFormSubmit(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.insert()\r\n          console.log('submit!', this.insertForm)\r\n          this.insertForm = {}\r\n        } else {\r\n          this.$message.error('请按照要求填写');\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    updateFormSubmit(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          console.log('submit!', this.insertForm);\r\n          this.updateById()\r\n        } else {\r\n          alert(\"请按照规范格式填写\")\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    clickEdit(id) {\r\n      let that = this\r\n      console.log(\"clickEdit - id\", id)\r\n      this.changeViewModel('update')\r\n\t\t\tthis.selectForeignKey('tClass','tClassList')\r\n\r\n      this.selectById(id)\r\n          .then((obj) => {\r\n            console.log(\"clickEdit - obj\", obj)\r\n            that.updateForm = obj\r\n          })\r\n    },\r\n    async selectById(id) {\r\n      let that = this\r\n      let result = {}\r\n      await serviceAsios({\r\n        url: '/api/'+lowerCaseName+'/selectById',\r\n        method: 'get',\r\n        params: {\r\n          id: id\r\n        }\r\n      })\r\n          .then(res => {\r\n            let responseResult = res.data\r\n            console.log(\"selectById - responseResult\", responseResult)\r\n            if (responseResult.code != 200) {\r\n              console.log(\"selectById - responseResult\", responseResult)\r\n              return;\r\n            }\r\n            result = responseResult.data\r\n          })\r\n          .catch(error => {\r\n            console.log(\"selectById - error\", error)\r\n          })\r\n      return result\r\n    },\r\n    insert() {\r\n      let that = this\r\n      console.log(\"insert - that.insertForm\", that.insertForm)\r\n      serviceAsios({\r\n        url: '/api/'+lowerCaseName+'/insert',\r\n        method: 'post',\r\n        data: that.insertForm\r\n      })\r\n          .then(res => {\r\n            let responseResult = res.data\r\n            console.log(\"insert - responseResult\", responseResult)\r\n            if (responseResult.code != 200) {\r\n              console.log(\"insert - responseResult\", responseResult)\r\n              return;\r\n            }\r\n            this.$message.success('添加成功')\r\n            this.changeViewModel('list')\r\n            that.selectPage()\r\n          })\r\n          .catch(error => {\r\n            console.log(\"insert - error\", error)\r\n          })\r\n    },\r\n    updateById() {\r\n      let that = this\r\n      serviceAsios({\r\n        url: '/api/'+lowerCaseName+'/updateById',\r\n        method: 'post',\r\n        data: that.updateForm\r\n      })\r\n          .then(res => {\r\n            let responseResult = res.data\r\n            console.log(\"updateById - responseResult\", responseResult)\r\n            if (responseResult.code != 200) {\r\n              console.log(\"updateById - responseResult\", responseResult)\r\n              return;\r\n            }\r\n            this.$message.success('修改成功')\r\n            this.changeViewModel('list')\r\n            that.selectPage()\r\n          })\r\n          .catch(error => {\r\n            console.log(\"updateById - error\", error)\r\n          })\r\n    },\r\n    clickNew(){\r\n      this.changeViewModel(\"insert\")\r\n\t\t\tthis.selectForeignKey('tClass','tClassList')\r\n\r\n    },\r\n    changeViewModel(viewModel) {\r\n      this.viewModel = viewModel\r\n      console.log(\"changeViewModel - viewModel\", this.viewModel)\r\n    },\r\n    confirm(title, content) {\r\n      let that = this\r\n      return new Promise((resolve, reject) => {\r\n        that.$confirm({\r\n          title: title,\r\n          content: content,\r\n          onOk() {\r\n            resolve(true)\r\n          },\r\n          onCancel() {\r\n            reject(false)\r\n          },\r\n        })\r\n      })\r\n    },\r\n    selectForeignKey(tableName,field){\r\n      let that = this\r\n      serviceAsios({\r\n        url: '/api/'+tableName+'/select',\r\n        method: 'get',\r\n        // params: params\r\n      })\r\n        .then(res => {\r\n            let responseResult = res.data\r\n            console.log(\"selectForeignKey - responseResult\", responseResult)\r\n            if (responseResult.code != 200) {\r\n              console.log(\"selectForeignKey - responseResult\", responseResult)\r\n              return;\r\n            }\r\n            that[field] = responseResult.data\r\n        })\r\n        .catch(error => {\r\n          console.log(\"selectForeignKey - error\", error)\r\n        })\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.content-template {\r\n  overflow: scroll;\r\n}\r\n\r\n.entity-list-container {\r\n  margin-top: 16px;\r\n}\r\n\r\n.entity-insert,\r\n.entity-update {\r\n  margin-top: 16px;\r\n  padding: 0 20px;\r\n}\r\n\r\n.content-template {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.main-container {\r\n  float: left;\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n\r\n.top-back span:hover {\r\n  cursor: pointer\r\n}\r\n\r\n/* 可以设置不同的进入和离开动画 */\r\n\r\n/* 设置持续时间和动画函数 */\r\n\r\n.slide-fade-enter-active {\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.slide-fade-leave-active {\r\n  transition: all 0.2s cubic-bezier(1.0, 0.5, 0.8, 1.0);\r\n}\r\n\r\n.slide-fade-enter,\r\n.slide-fade-leave-to\r\n  /* .slide-fade-leave-active for below version 2.1.8 */\r\n\r\n{\r\n  transform: translateX(10px);\r\n  opacity: 0;\r\n}\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}