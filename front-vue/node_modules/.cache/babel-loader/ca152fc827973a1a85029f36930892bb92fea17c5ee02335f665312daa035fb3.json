{"ast":null,"code":"import serviceAsios from '../../axios/serviceAxios';\nimport axios from 'axios';\nconst columns = [\n// { title: 'id', width: 100, dataIndex: 'name', key: 'id', fixed: 'left' },\n{\n  title: 'id',\n  width: 100,\n  dataIndex: 'name',\n  key: 'id',\n  fixed: 'left'\n}, {\n  title: 'name',\n  width: 100,\n  dataIndex: 'age',\n  key: 'name',\n  fixed: 'left'\n}, {\n  title: 'gender',\n  dataIndex: 'gender',\n  key: 'gender',\n  width: 150\n}, {\n  title: 'age',\n  dataIndex: 'age',\n  key: 'age',\n  width: 150\n}, {\n  title: 'phone_number',\n  dataIndex: 'phone_number',\n  key: 'phone_number',\n  width: 150\n}, {\n  title: '操作',\n  key: 'operation',\n  fixed: 'right',\n  width: 100,\n  scopedSlots: {\n    customRender: 'action'\n  }\n}];\nexport default {\n  name: \"Student\",\n  data() {\n    return {\n      viewModel: 'insert',\n      data: [],\n      columns,\n      fieldList: [{\n        name: 'id',\n        label: 'id'\n      }, {\n        name: 'name',\n        label: 'name'\n      }, {\n        name: 'gender',\n        label: 'gender'\n      }, {\n        name: 'age',\n        label: 'age'\n      }, {\n        name: 'phone_number',\n        label: 'phone_number'\n      }],\n      selectField: '',\n      selectFieldValue: '',\n      pagination: {\n        \"current\": 1,\n        \"default-current\": 1,\n        \"pageSize\": 10,\n        \"show-less-items\": true,\n        \"show-quick-jumper\": true,\n        \"total\": 50\n      },\n      selectedRowKeys: [],\n      labelCol: {\n        span: 4\n      },\n      wrapperCol: {\n        span: 14\n      },\n      form: {\n        name: '',\n        region: undefined,\n        date1: undefined,\n        delivery: false,\n        type: [],\n        resource: '',\n        desc: ''\n      }\n    };\n  },\n  computed: {\n    rowSelection() {\n      return {\n        selectedRowKeys: this.selectedRowKeys,\n        onChange: this.onSelectChange\n      };\n    }\n  },\n  mounted() {\n    this.selectPage();\n  },\n  methods: {\n    selectPage() {\n      let that = this;\n      let params = {\n        \"pageNum\": this.pagination.current,\n        \"pageSize\": this.pagination.pageSize\n      };\n      if (this.selectField != '') {\n        params[this.selectField] = this.selectFieldValue;\n      }\n      serviceAsios({\n        url: '/api/student/selectPage',\n        method: 'get',\n        params: params\n        // responseType:'JSON'\n      }).then(res => {\n        let responseResult = res.data;\n        console.log(\"selectPage - responseResult\", responseResult);\n        if (responseResult.code != 200) {\n          console.log(\"selectPage - responseResult\", responseResult);\n          return;\n        }\n        let list = responseResult.data.list;\n        for (let index = 0; index < list.length; index++) {\n          let ele = list[index];\n          ele.key = ele.id;\n        }\n        that.data = list;\n        that.pagination.total = responseResult.data.total;\n      }).catch(error => {\n        console.log(\"selectPage - error\", error);\n      });\n    },\n    deleteByIds() {\n      let that = this;\n      serviceAsios({\n        url: '/api/student/deleteByIds',\n        method: 'post',\n        data: that.selectedRowKeys\n        // responseType:'JSON'\n      }).then(res => {\n        let responseResult = res.data;\n        console.log(\"deleteByIds - responseResult\", responseResult);\n        if (responseResult.code != 200) {\n          console.log(\"deleteByIds - responseResult\", responseResult);\n          return;\n        }\n        that.selectPage();\n      }).catch(error => {\n        console.log(\"deleteByIds - error\", error);\n      });\n    },\n    pageChange(page) {\n      console.log(\"page\", page);\n      this.pagination = page;\n      console.log(\"pagination\", this.pagination);\n      this.selectPage();\n    },\n    onSelectChange(selectedRowKeys) {\n      console.log('selectedRowKeys changed: ', selectedRowKeys);\n      this.selectedRowKeys = selectedRowKeys;\n    },\n    onSubmit() {\n      console.log('submit!', this.form);\n    },\n    changeViewModel(viewModel) {\n      this.viewModel = viewModel;\n      console.log(\"changeViewModel - viewModel\", this.viewModel);\n    }\n  }\n};","map":{"version":3,"names":["serviceAsios","axios","columns","title","width","dataIndex","key","fixed","scopedSlots","customRender","name","data","viewModel","fieldList","label","selectField","selectFieldValue","pagination","selectedRowKeys","labelCol","span","wrapperCol","form","region","undefined","date1","delivery","type","resource","desc","computed","rowSelection","onChange","onSelectChange","mounted","selectPage","methods","that","params","current","pageSize","url","method","then","res","responseResult","console","log","code","list","index","length","ele","id","total","catch","error","deleteByIds","pageChange","page","onSubmit","changeViewModel"],"sources":["src/components/example/student.vue"],"sourcesContent":["<template>\n    <div class=\"content-template\">\n        <div v-show=\"viewModel=='list'\" class=\"content-container\">\n            <a-row type=\"flex\">\n                <a-col :span=\"8\" :order=\"1\">\n                    <div class=\"left-button\">\n                        <a-space>\n                            <a-button type=\"primary\" class=\"insert-button\" @click=\"changeViewModel('insert')\"> 增加 </a-button>\n                            <a-button type=\"danger\" class=\"delete-button\" @click=\"deleteByIds\"> 删除 </a-button>\n                        </a-space>\n                    </div>\n                </a-col>\n                <a-col :span=\"8\" :order=\"2\"> </a-col>\n                <a-col :span=\"8\" :order=\"3\">\n                    <a-space>\n                        <a-select v-model=\"selectField\" default-value=\"\" style=\"width: 120px\">\n                            <a-select-option :key=\"field.name\" v-for=\"field in fieldList\" :value=\"field.name\"> {{field.label}} </a-select-option>\n                        </a-select>\n                        <a-input v-model=\"selectFieldValue\">\n                        </a-input>\n                        <a-button type=\"primary\" class=\"select-button\" @click=\"selectPage()\"> 查询 </a-button>\n                    </a-space>\n                </a-col>\n            </a-row>\n            <div class=\"entity-list-container container\">\n                <div class=\"entity-list\">\n                    <a-table :row-selection=\"rowSelection\" :columns=\"columns\" :data-source=\"data\" :scroll=\"{ x: 1500, y: 400 }\" :pagination=\"pagination\" @change=\"pageChange\">\n                        <a slot=\"action\" slot-scope=\"text\">编辑</a>\n                    </a-table>\n                </div>\n            </div>\n        </div>\n        <div v-show=\"viewModel=='insert'\" class=\"entity-insert-container container\">\n            <div class=\"top-back\">\n                <span @click=\"changeViewModel('list')\"><a-icon type=\"left\" /></span>\n            </div>\n            <div class=\"entity-insert\">\n                <a-form-model :model=\"form\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n                    <a-form-model-item label=\"Activity name\">\n                        <a-input v-model=\"form.name\" />\n                    </a-form-model-item>\n                    <a-form-model-item label=\"Activity zone\">\n                        <a-select v-model=\"form.region\" placeholder=\"please select your zone\">\n                            <a-select-option value=\"shanghai\">\n                                Zone one\n                            </a-select-option>\n                            <a-select-option value=\"beijing\">\n                                Zone two\n                            </a-select-option>\n                        </a-select>\n                    </a-form-model-item>\n                    <a-form-model-item label=\"Activity time\">\n                        <a-date-picker v-model=\"form.date1\" show-time type=\"date\" placeholder=\"Pick a date\" style=\"width: 100%;\" />\n                    </a-form-model-item>\n                    <a-form-model-item label=\"Instant delivery\">\n                        <a-switch v-model=\"form.delivery\" />\n                    </a-form-model-item>\n                    <a-form-model-item label=\"Activity type\">\n                        <a-checkbox-group v-model=\"form.type\">\n                            <a-checkbox value=\"1\" name=\"type\">\n                                Online\n                            </a-checkbox>\n                            <a-checkbox value=\"2\" name=\"type\">\n                                Promotion\n                            </a-checkbox>\n                            <a-checkbox value=\"3\" name=\"type\">\n                                Offline\n                            </a-checkbox>\n                        </a-checkbox-group>\n                    </a-form-model-item>\n                    <a-form-model-item label=\"Resources\">\n                        <a-radio-group v-model=\"form.resource\">\n                            <a-radio value=\"1\">\n                                Sponsor\n                            </a-radio>\n                            <a-radio value=\"2\">\n                                Venue\n                            </a-radio>\n                        </a-radio-group>\n                    </a-form-model-item>\n                    <a-form-model-item label=\"Activity form\">\n                        <a-input v-model=\"form.desc\" type=\"textarea\" />\n                    </a-form-model-item>\n                    <a-form-model-item :wrapper-col=\"{ span: 14, offset: 4 }\">\n                        <a-button type=\"primary\" @click=\"onSubmit\">\n                            Create\n                        </a-button>\n                        <a-button style=\"margin-left: 10px;\">\n                            Cancel\n                        </a-button>\n                    </a-form-model-item>\n                </a-form-model>\n            </div>\n        </div>\n        <div v-show=\"viewModel=='update'\" class=\"entity-update-container container\">\n            <div class=\"entity-update\"></div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport serviceAsios from '../../axios/serviceAxios'\nimport axios from 'axios'\n\nconst columns = [\n    // { title: 'id', width: 100, dataIndex: 'name', key: 'id', fixed: 'left' },\n    { title: 'id', width: 100, dataIndex: 'name', key: 'id', fixed: 'left' },\n    { title: 'name', width: 100, dataIndex: 'age', key: 'name', fixed: 'left' },\n    { title: 'gender', dataIndex: 'gender', key: 'gender', width: 150 },\n    { title: 'age', dataIndex: 'age', key: 'age', width: 150 },\n    { title: 'phone_number', dataIndex: 'phone_number', key: 'phone_number', width: 150 },\n    {\n        title: '操作',\n        key: 'operation',\n        fixed: 'right',\n        width: 100,\n        scopedSlots: { customRender: 'action' },\n    },\n];\n\n\nexport default {\n    name: \"Student\",\n\n    data() {\n        return {\n            viewModel: 'insert',\n            data: [],\n            columns,\n            fieldList: [\n                { name: 'id', label: 'id' },\n                { name: 'name', label: 'name' },\n                { name: 'gender', label: 'gender' },\n                { name: 'age', label: 'age' },\n                { name: 'phone_number', label: 'phone_number' },\n            ],\n            selectField: '',\n            selectFieldValue: '',\n            pagination: {\n                \"current\": 1,\n                \"default-current\": 1,\n                \"pageSize\": 10,\n                \"show-less-items\": true,\n                \"show-quick-jumper\": true,\n                \"total\": 50,\n            },\n            selectedRowKeys: [],\n            labelCol: { span: 4 },\n            wrapperCol: { span: 14 },\n            form: {\n                name: '',\n                region: undefined,\n                date1: undefined,\n                delivery: false,\n                type: [],\n                resource: '',\n                desc: '',\n            },\n        };\n    },\n    computed: {\n        rowSelection() {\n            return {\n                selectedRowKeys: this.selectedRowKeys,\n                onChange: this.onSelectChange\n            }\n\n        },\n    },\n    mounted() {\n        this.selectPage()\n    },\n    methods: {\n        selectPage() {\n            let that = this\n            let params = {\n                \"pageNum\": this.pagination.current,\n                \"pageSize\": this.pagination.pageSize,\n            }\n            if (this.selectField != '') {\n                params[this.selectField] = this.selectFieldValue\n            }\n\n            serviceAsios({\n                    url: '/api/student/selectPage',\n                    method: 'get',\n                    params: params\n                    // responseType:'JSON'\n                })\n                .then(res => {\n                    let responseResult = res.data\n                    console.log(\"selectPage - responseResult\", responseResult)\n                    if (responseResult.code != 200) {\n                        console.log(\"selectPage - responseResult\", responseResult)\n                        return;\n                    }\n                    let list = responseResult.data.list\n                    for (let index = 0; index < list.length; index++) {\n                        let ele = list[index];\n                        ele.key = ele.id\n                    }\n                    that.data = list\n                    that.pagination.total = responseResult.data.total\n                })\n                .catch(error => {\n                    console.log(\"selectPage - error\", error)\n                })\n        },\n        deleteByIds() {\n            let that = this\n            serviceAsios({\n                    url: '/api/student/deleteByIds',\n                    method: 'post',\n                    data: that.selectedRowKeys\n                    // responseType:'JSON'\n                })\n                .then(res => {\n                    let responseResult = res.data\n                    console.log(\"deleteByIds - responseResult\", responseResult)\n                    if (responseResult.code != 200) {\n                        console.log(\"deleteByIds - responseResult\", responseResult)\n                        return;\n                    }\n                    that.selectPage()\n                })\n                .catch(error => {\n                    console.log(\"deleteByIds - error\", error)\n                })\n        },\n        pageChange(page) {\n            console.log(\"page\", page)\n            this.pagination = page\n            console.log(\"pagination\", this.pagination)\n            this.selectPage()\n        },\n        onSelectChange(selectedRowKeys) {\n            console.log('selectedRowKeys changed: ', selectedRowKeys);\n            this.selectedRowKeys = selectedRowKeys;\n        },\n        onSubmit() {\n            console.log('submit!', this.form);\n        },\n        changeViewModel(viewModel) {\n            this.viewModel = viewModel\n            console.log(\"changeViewModel - viewModel\", this.viewModel)\n        }\n    },\n};\n</script>\n\n<style scoped>\n.entity-list-container {\n    margin-top: 16px;\n}\n\n.entity-insert {\n    margin-top: 16px;\n    padding: 0 100px;\n}\n\n.top-back span:hover{\n    cursor:pointer\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}